/*
 StackMob JS SDK Version 0.6.0
 Copyright 2012 StackMob Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

// JSON
// 2011-02-23
// Public Domain.
// http://www.JSON.org/json2.js

// Underscore.js 1.4.1
// http://underscorejs.org
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore may be freely distributed under the MIT license.

// Backbone.js 0.9.2
// (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://backbonejs.org

var JSON;JSON||(JSON={});
(function(){function g(a){return 10>a?"0"+a:a}function l(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=p[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,d){var g,p,n,v,s=f,y,t=d[b];t&&("object"===typeof t&&"function"===typeof t.toJSON)&&(t=t.toJSON(b));"function"===typeof k&&(t=k.call(d,b,t));switch(typeof t){case "string":return l(t);case "number":return isFinite(t)?String(t):"null";case "boolean":case "null":return String(t);case "object":if(!t)return"null";
f+=h;y=[];if("[object Array]"===Object.prototype.toString.apply(t)){v=t.length;for(g=0;g<v;g+=1)y[g]=a(g,t)||"null";n=0===y.length?"[]":f?"[\n"+f+y.join(",\n"+f)+"\n"+s+"]":"["+y.join(",")+"]";f=s;return n}if(k&&"object"===typeof k){v=k.length;for(g=0;g<v;g+=1)"string"===typeof k[g]&&(p=k[g],(n=a(p,t))&&y.push(l(p)+(f?": ":":")+n))}else for(p in t)Object.prototype.hasOwnProperty.call(t,p)&&(n=a(p,t))&&y.push(l(p)+(f?": ":":")+n);n=0===y.length?"{}":f?"{\n"+f+y.join(",\n"+f)+"\n"+s+"}":"{"+y.join(",")+
"}";f=s;return n}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,h,p={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,d,g){var p;h=f="";if("number"===typeof g)for(p=0;p<g;p+=1)h+=" ";else"string"===typeof g&&(h=g);if((k=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return a("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,d){function f(a,b){var h,g,i=a[b];if(i&&"object"===typeof i)for(h in i)Object.prototype.hasOwnProperty.call(i,h)&&(g=f(i,h),void 0!==g?i[h]=g:delete i[h]);return d.call(a,b,i)}var h,a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return h=eval("("+a+")"),"function"===typeof d?f({"":h},""):h;throw new SyntaxError("JSON.parse");})})();(function(){var g=this,l=g._,a={},b=Array.prototype,d=Object.prototype,f=b.push,h=b.slice,p=b.concat,k=d.toString,i=d.hasOwnProperty,q=b.forEach,w=b.map,x=b.reduce,n=b.reduceRight,v=b.filter,s=b.every,y=b.some,t=b.indexOf,C=b.lastIndexOf,d=Array.isArray,E=Object.keys,A=Function.prototype.bind,e=function(m){if(m instanceof e)return m;if(!(this instanceof e))return new e(m);this._wrapped=m};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports._=
e):g._=e;e.VERSION="1.4.1";var u=e.each=e.forEach=function(m,c,b){if(q&&m.forEach===q)m.forEach(c,b);else if(m.length===+m.length)for(var j=0,d=m.length;j<d&&c.call(b,m[j],j,m)!==a;j++);else for(j in m)if(e.has(m,j)&&c.call(b,m[j],j,m)===a)break};e.map=e.collect=function(m,c,a){var b=[];return w&&m.map===w?m.map(c,a):(u(m,function(m,j,d){b[b.length]=c.call(a,m,j,d)}),b)};e.reduce=e.foldl=e.inject=function(m,c,a,b){var j=2<arguments.length;if(x&&m.reduce===x)return b&&(c=e.bind(c,b)),j?m.reduce(c,
a):m.reduce(c);u(m,function(m,d,e){j?a=c.call(b,a,m,d,e):(a=m,j=!0)});if(!j)throw new TypeError("Reduce of empty array with no initial value");return a};e.reduceRight=e.foldr=function(m,c,a,b){var j=2<arguments.length;if(n&&m.reduceRight===n)return b&&(c=e.bind(c,b)),2<arguments.length?m.reduceRight(c,a):m.reduceRight(c);var d=m.length;if(d!==+d)var f=e.keys(m),d=f.length;u(m,function(e,r,h){r=f?f[--d]:--d;j?a=c.call(b,a,m[r],r,h):(a=m[r],j=!0)});if(!j)throw new TypeError("Reduce of empty array with no initial value");
return a};e.find=e.detect=function(c,a,b){var j;return z(c,function(c,m,d){if(a.call(b,c,m,d))return j=c,!0}),j};e.filter=e.select=function(c,a,b){var j=[];return v&&c.filter===v?c.filter(a,b):(u(c,function(c,m,d){a.call(b,c,m,d)&&(j[j.length]=c)}),j)};e.reject=function(c,a,b){var j=[];return u(c,function(c,m,d){a.call(b,c,m,d)||(j[j.length]=c)}),j};e.every=e.all=function(c,b,j){b||(b=e.identity);var d=!0;return s&&c.every===s?c.every(b,j):(u(c,function(c,m,e){if(!(d=d&&b.call(j,c,m,e)))return a}),
!!d)};var z=e.some=e.any=function(c,b,j){b||(b=e.identity);var d=!1;return y&&c.some===y?c.some(b,j):(u(c,function(c,m,e){if(d||(d=b.call(j,c,m,e)))return a}),!!d)};e.contains=e.include=function(c,a){var b=!1;return t&&c.indexOf===t?-1!=c.indexOf(a):(b=z(c,function(c){return c===a}),b)};e.invoke=function(c,a){var b=h.call(arguments,2);return e.map(c,function(c){return(e.isFunction(a)?a:c[a]).apply(c,b)})};e.pluck=function(c,a){return e.map(c,function(c){return c[a]})};e.where=function(c,a){return e.isEmpty(a)?
[]:e.filter(c,function(c){for(var m in a)if(a[m]!==c[m])return!1;return!0})};e.max=function(c,a,b){if(!a&&e.isArray(c)&&c[0]===+c[0]&&65535>c.length)return Math.max.apply(Math,c);if(!a&&e.isEmpty(c))return-Infinity;var j={computed:-Infinity};return u(c,function(c,m,d){m=a?a.call(b,c,m,d):c;m>=j.computed&&(j={value:c,computed:m})}),j.value};e.min=function(c,a,b){if(!a&&e.isArray(c)&&c[0]===+c[0]&&65535>c.length)return Math.min.apply(Math,c);if(!a&&e.isEmpty(c))return Infinity;var j={computed:Infinity};
return u(c,function(c,m,d){m=a?a.call(b,c,m,d):c;m<j.computed&&(j={value:c,computed:m})}),j.value};e.shuffle=function(c){var a,b=0,j=[];return u(c,function(c){a=e.random(b++);j[b-1]=j[a];j[a]=c}),j};var B=function(c){return e.isFunction(c)?c:function(a){return a[c]}};e.sortBy=function(c,a,b){var j=B(a);return e.pluck(e.map(c,function(c,a,m){return{value:c,index:a,criteria:j.call(b,c,a,m)}}).sort(function(c,a){var m=c.criteria,b=a.criteria;if(m!==b){if(m>b||void 0===m)return 1;if(m<b||void 0===b)return-1}return c.index<
a.index?-1:1}),"value")};var c=function(c,a,b,j){var d={},e=B(a);return u(c,function(a,f){var r=e.call(b,a,f,c);j(d,r,a)}),d};e.groupBy=function(a,b,j){return c(a,b,j,function(c,a,m){(e.has(c,a)?c[a]:c[a]=[]).push(m)})};e.countBy=function(a,b,j){return c(a,b,j,function(c,a){e.has(c,a)||(c[a]=0);c[a]++})};e.sortedIndex=function(c,a,b,j){for(var b=null==b?e.identity:B(b),a=b.call(j,a),d=0,f=c.length;d<f;){var r=d+f>>>1;b.call(j,c[r])<a?d=r+1:f=r}return d};e.toArray=function(c){return c?c.length===+c.length?
h.call(c):e.values(c):[]};e.size=function(c){return c.length===+c.length?c.length:e.keys(c).length};e.first=e.head=e.take=function(c,a,b){return null!=a&&!b?h.call(c,0,a):c[0]};e.initial=function(c,a,b){return h.call(c,0,c.length-(null==a||b?1:a))};e.last=function(c,a,b){return null!=a&&!b?h.call(c,Math.max(c.length-a,0)):c[c.length-1]};e.rest=e.tail=e.drop=function(c,a,b){return h.call(c,null==a||b?1:a)};e.compact=function(c){return e.filter(c,function(c){return!!c})};var j=function(c,a,b){return u(c,
function(c){e.isArray(c)?a?f.apply(b,c):j(c,a,b):b.push(c)}),b};e.flatten=function(c,a){return j(c,a,[])};e.without=function(c){return e.difference(c,h.call(arguments,1))};e.uniq=e.unique=function(c,a,b,j){var b=b?e.map(c,b,j):c,d=[],f=[];return u(b,function(b,j){if(a?!j||f[f.length-1]!==b:!e.contains(f,b))f.push(b),d.push(c[j])}),d};e.union=function(){return e.uniq(p.apply(b,arguments))};e.intersection=function(c){var a=h.call(arguments,1);return e.filter(e.uniq(c),function(c){return e.every(a,function(a){return 0<=
e.indexOf(a,c)})})};e.difference=function(c){var a=p.apply(b,h.call(arguments,1));return e.filter(c,function(c){return!e.contains(a,c)})};e.zip=function(){for(var c=h.call(arguments),a=e.max(e.pluck(c,"length")),b=Array(a),j=0;j<a;j++)b[j]=e.pluck(c,""+j);return b};e.object=function(c,a){for(var b={},j=0,d=c.length;j<d;j++)a?b[c[j]]=a[j]:b[c[j][0]]=c[j][1];return b};e.indexOf=function(c,a,b){var j=0,d=c.length;if(b){if("number"!=typeof b)return j=e.sortedIndex(c,a),c[j]===a?j:-1;j=0>b?Math.max(0,
d+b):b}if(t&&c.indexOf===t)return c.indexOf(a,b);for(;j<d;j++)if(c[j]===a)return j;return-1};e.lastIndexOf=function(c,a,b){var j=null!=b;if(C&&c.lastIndexOf===C)return j?c.lastIndexOf(a,b):c.lastIndexOf(a);for(b=j?b:c.length;b--;)if(c[b]===a)return b;return-1};e.range=function(c,a,b){1>=arguments.length&&(a=c||0,c=0);for(var b=arguments[2]||1,j=Math.max(Math.ceil((a-c)/b),0),d=0,e=Array(j);d<j;)e[d++]=c,c+=b;return e};var r=function(){};e.bind=function(c,a){var b,j;if(c.bind===A&&A)return A.apply(c,
h.call(arguments,1));if(!e.isFunction(c))throw new TypeError;return j=h.call(arguments,2),b=function(){if(this instanceof b){r.prototype=c.prototype;var d=new r,e=c.apply(d,j.concat(h.call(arguments)));return Object(e)===e?e:d}return c.apply(a,j.concat(h.call(arguments)))}};e.bindAll=function(c){var a=h.call(arguments,1);return 0==a.length&&(a=e.functions(c)),u(a,function(a){c[a]=e.bind(c[a],c)}),c};e.memoize=function(c,a){var b={};return a||(a=e.identity),function(){var j=a.apply(this,arguments);
return e.has(b,j)?b[j]:b[j]=c.apply(this,arguments)}};e.delay=function(c,a){var b=h.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)};e.defer=function(c){return e.delay.apply(e,[c,1].concat(h.call(arguments,1)))};e.throttle=function(c,a){var b,j,d,f,r,h,g=e.debounce(function(){r=f=!1},a);return function(){b=this;j=arguments;return d||(d=setTimeout(function(){d=null;r&&(h=c.apply(b,j));g()},a)),f?r=!0:(f=!0,h=c.apply(b,j)),g(),h}};e.debounce=function(c,a,b){var j,d;return function(){var e=
this,f=arguments,r=b&&!j;return clearTimeout(j),j=setTimeout(function(){j=null;b||(d=c.apply(e,f))},a),r&&(d=c.apply(e,f)),d}};e.once=function(c){var a=!1,b;return function(){return a?b:(a=!0,b=c.apply(this,arguments),c=null,b)}};e.wrap=function(c,a){return function(){var b=[c];return f.apply(b,arguments),a.apply(this,b)}};e.compose=function(){var c=arguments;return function(){for(var a=arguments,b=c.length-1;0<=b;b--)a=[c[b].apply(this,a)];return a[0]}};e.after=function(c,a){return 0>=c?a():function(){if(1>
--c)return a.apply(this,arguments)}};e.keys=E||function(c){if(c!==Object(c))throw new TypeError("Invalid object");var a=[],b;for(b in c)e.has(c,b)&&(a[a.length]=b);return a};e.values=function(c){var a=[],b;for(b in c)e.has(c,b)&&a.push(c[b]);return a};e.pairs=function(c){var a=[],b;for(b in c)e.has(c,b)&&a.push([b,c[b]]);return a};e.invert=function(c){var a={},b;for(b in c)e.has(c,b)&&(a[c[b]]=b);return a};e.functions=e.methods=function(c){var a=[],b;for(b in c)e.isFunction(c[b])&&a.push(b);return a.sort()};
e.extend=function(c){return u(h.call(arguments,1),function(a){for(var b in a)c[b]=a[b]}),c};e.pick=function(c){var a={},j=p.apply(b,h.call(arguments,1));return u(j,function(b){b in c&&(a[b]=c[b])}),a};e.omit=function(c){var a={},j=p.apply(b,h.call(arguments,1)),d;for(d in c)e.contains(j,d)||(a[d]=c[d]);return a};e.defaults=function(c){return u(h.call(arguments,1),function(a){for(var b in a)null==c[b]&&(c[b]=a[b])}),c};e.clone=function(c){return e.isObject(c)?e.isArray(c)?c.slice():e.extend({},c):
c};e.tap=function(c,a){return a(c),c};var F=function(c,a,b,j){if(c===a)return 0!==c||1/c==1/a;if(null==c||null==a)return c===a;c instanceof e&&(c=c._wrapped);a instanceof e&&(a=a._wrapped);var d=k.call(c);if(d!=k.call(a))return!1;switch(d){case "[object String]":return c==String(a);case "[object Number]":return c!=+c?a!=+a:0==c?1/c==1/a:c==+a;case "[object Date]":case "[object Boolean]":return+c==+a;case "[object RegExp]":return c.source==a.source&&c.global==a.global&&c.multiline==a.multiline&&c.ignoreCase==
a.ignoreCase}if("object"!=typeof c||"object"!=typeof a)return!1;for(var f=b.length;f--;)if(b[f]==c)return j[f]==a;b.push(c);j.push(a);var f=0,r=!0;if("[object Array]"==d){if(f=c.length,r=f==a.length)for(;f--&&(r=F(c[f],a[f],b,j)););}else{var d=c.constructor,h=a.constructor;if(d!==h&&(!e.isFunction(d)||!(d instanceof d&&e.isFunction(h)&&h instanceof h)))return!1;for(var g in c)if(e.has(c,g)&&(f++,!(r=e.has(a,g)&&F(c[g],a[g],b,j))))break;if(r){for(g in a)if(e.has(a,g)&&!f--)break;r=!f}}return b.pop(),
j.pop(),r};e.isEqual=function(c,a){return F(c,a,[],[])};e.isEmpty=function(c){if(null==c)return!0;if(e.isArray(c)||e.isString(c))return 0===c.length;for(var a in c)if(e.has(c,a))return!1;return!0};e.isElement=function(c){return!!c&&1===c.nodeType};e.isArray=d||function(c){return"[object Array]"==k.call(c)};e.isObject=function(c){return c===Object(c)};u("Arguments Function String Number Date RegExp".split(" "),function(c){e["is"+c]=function(a){return k.call(a)=="[object "+c+"]"}});e.isArguments(arguments)||
(e.isArguments=function(c){return!!c&&!!e.has(c,"callee")});"function"!=typeof/./&&(e.isFunction=function(c){return"function"==typeof c});e.isFinite=function(c){return e.isNumber(c)&&isFinite(c)};e.isNaN=function(c){return e.isNumber(c)&&c!=+c};e.isBoolean=function(c){return!0===c||!1===c||"[object Boolean]"==k.call(c)};e.isNull=function(c){return null===c};e.isUndefined=function(c){return void 0===c};e.has=function(c,a){return i.call(c,a)};e.noConflict=function(){return g._=l,this};e.identity=function(c){return c};
e.times=function(c,a,b){for(var j=0;j<c;j++)a.call(b,j)};e.random=function(c,a){return null==a&&(a=c,c=0),c+(0|Math.random()*(a-c+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};D.unescape=e.invert(D.escape);var H={escape:RegExp("["+e.keys(D.escape).join("")+"]","g"),unescape:RegExp("("+e.keys(D.unescape).join("|")+")","g")};e.each(["escape","unescape"],function(c){e[c]=function(a){return null==a?"":(""+a).replace(H[c],function(a){return D[c][a]})}});
e.result=function(c,a){if(null==c)return null;var b=c[a];return e.isFunction(b)?b.call(c):b};e.mixin=function(c){u(e.functions(c),function(a){var b=e[a]=c[a];e.prototype[a]=function(){var c=[this._wrapped];f.apply(c,arguments);c=b.apply(e,c);return this._chain?e(c).chain():c}})};var I=0;e.uniqueId=function(c){var a=I++;return c?c+a:a};e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t",
"\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;e.template=function(c,a,b){var b=e.defaults({},b,e.templateSettings),j=RegExp([(b.escape||G).source,(b.interpolate||G).source,(b.evaluate||G).source].join("|")+"|$","g"),d=0,f="__p+='";c.replace(j,function(a,b,j,e,r){f+=c.slice(d,r).replace(K,function(c){return"\\"+J[c]});f+=b?"'+\n((__t=("+b+"))==null?'':_.escape(__t))+\n'":j?"'+\n((__t=("+j+"))==null?'':__t)+\n'":e?"';\n"+e+"\n__p+='":"";d=r+a.length});f+="';\n";b.variable||(f=
"with(obj||{}){\n"+f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var r=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h;}if(a)return r(a,e);a=function(c){return r.call(this,c,e)};return a.source="function("+(b.variable||"obj")+"){\n"+f+"}",a};e.chain=function(c){return e(c).chain()};e.mixin(e);u("pop push reverse shift sort splice unshift".split(" "),function(c){var a=b[c];e.prototype[c]=function(){var b=
this._wrapped;return a.apply(b,arguments),("shift"==c||"splice"==c)&&0===b.length&&delete b[0],this._chain?e(b).chain():b}});u(["concat","join","slice"],function(c){var a=b[c];e.prototype[c]=function(){var c=a.apply(this._wrapped,arguments);return this._chain?e(c).chain():c}});e.extend(e.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(){var g=this,l=g.Backbone,a=Array.prototype.slice,b=Array.prototype.splice,d;d="undefined"!==typeof exports?exports:g.Backbone={};d.VERSION="0.9.2";var f=g._;!f&&"undefined"!==typeof require&&(f=require("underscore"));var h=g.jQuery||g.Zepto||g.ender;d.setDomLibrary=function(c){h=c};d.noConflict=function(){g.Backbone=l;return this};d.emulateHTTP=!1;d.emulateJSON=!1;var p=/\s+/,k=d.Events={on:function(c,a,b){var d,f,e,h,g;if(!a)return this;c=c.split(p);for(d=this._callbacks||(this._callbacks=
{});f=c.shift();)e=(g=d[f])?g.tail:{},e.next=h={},e.context=b,e.callback=a,d[f]={tail:h,next:g?g.next:e};return this},off:function(c,a,b){var d,e,h,g,n,i;if(e=this._callbacks){if(!c&&!a&&!b)return delete this._callbacks,this;for(c=c?c.split(p):f.keys(e);d=c.shift();)if(h=e[d],delete e[d],h&&(a||b))for(g=h.tail;(h=h.next)!==g;)if(n=h.callback,i=h.context,a&&n!==a||b&&i!==b)this.on(d,n,i);return this}},trigger:function(c){var b,d,f,e,h,g;if(!(f=this._callbacks))return this;h=f.all;c=c.split(p);for(g=
a.call(arguments,1);b=c.shift();){if(d=f[b])for(e=d.tail;(d=d.next)!==e;)d.callback.apply(d.context||this,g);if(d=h){e=d.tail;for(b=[b].concat(g);(d=d.next)!==e;)d.callback.apply(d.context||this,b)}}return this}};k.bind=k.on;k.unbind=k.off;var i=d.Model=function(c,a){var b;c||(c={});a&&a.parse&&(c=this.parse(c));if(b=z(this,"defaults"))c=f.extend({},b,c);a&&a.collection&&(this.collection=a.collection);this.attributes={};this._escapedAttributes={};this.cid=f.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(c,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=f.clone(this.attributes);this.initialize.apply(this,arguments)};f.extend(i.prototype,k,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(c){return this.attributes[c]},escape:function(c){var a;if(a=this._escapedAttributes[c])return a;a=this.get(c);return this._escapedAttributes[c]=f.escape(null==
a?"":""+a)},has:function(c){return null!=this.get(c)},set:function(c,a,b){var d,e;f.isObject(c)||null==c?(d=c,b=a):(d={},d[c]=a);b||(b={});if(!d)return this;d instanceof i&&(d=d.attributes);if(b.unset)for(e in d)d[e]=void 0;if(!this._validate(d,b))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var a=b.changes={},h=this.attributes,g=this._escapedAttributes,n=this._previousAttributes||{};for(e in d){c=d[e];if(!f.isEqual(h[e],c)||b.unset&&f.has(h,e))delete g[e],(b.silent?this._silent:
a)[e]=!0;b.unset?delete h[e]:h[e]=c;!f.isEqual(n[e],c)||f.has(h,e)!=f.has(n,e)?(this.changed[e]=c,b.silent||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e])}b.silent||this.change(b);return this},unset:function(c,a){(a||(a={})).unset=!0;return this.set(c,null,a)},clear:function(c){(c||(c={})).unset=!0;return this.set(f.clone(this.attributes),c)},fetch:function(c){var c=c?f.clone(c):{},a=this,b=c.success;c.success=function(d,e,f){if(!a.set(a.parse(d,f),c))return!1;b&&b(a,d)};
c.error=d.wrapError(c.error,a,c);return(this.sync||d.sync).call(this,"read",this,c)},save:function(c,a,b){var e,h;f.isObject(c)||null==c?(e=c,b=a):(e={},e[c]=a);b=b?f.clone(b):{};if(b.wait){if(!this._validate(e,b))return!1;h=f.clone(this.attributes)}c=f.extend({},b,{silent:!0});if(e&&!this.set(e,b.wait?c:b))return!1;var g=this,n=b.success;b.success=function(c,a,d){a=g.parse(c,d);b.wait&&(delete b.wait,a=f.extend(e||{},a));if(!g.set(a,b))return!1;n?n(g,c):g.trigger("sync",g,c,b)};b.error=d.wrapError(b.error,
g,b);a=this.isNew()?"create":"update";a=(this.sync||d.sync).call(this,a,this,b);b.wait&&this.set(h,c);return a},destroy:function(c){var c=c?f.clone(c):{},a=this,b=c.success,e=function(){a.trigger("destroy",a,a.collection,c)};if(this.isNew())return e(),!1;c.success=function(d){c.wait&&e();b?b(a,d):a.trigger("sync",a,d,c)};c.error=d.wrapError(c.error,a,c);var h=(this.sync||d.sync).call(this,"delete",this,c);c.wait||e();return h},url:function(){var c=z(this,"urlRoot")||z(this.collection,"url")||B();
return this.isNew()?c:c+("/"==c.charAt(c.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(c){return c},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(c){c||(c={});var a=this._changing;this._changing=!0;for(var b in this._silent)this._pending[b]=!0;var d=f.extend({},c.changes,this._silent);this._silent={};for(b in d)this.trigger("change:"+b,this,this.get(b),c);if(a)return this;for(;!f.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,c);for(b in this.changed)!this._pending[b]&&!this._silent[b]&&delete this.changed[b];this._previousAttributes=f.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(c){return!arguments.length?!f.isEmpty(this.changed):f.has(this.changed,c)},changedAttributes:function(c){if(!c)return this.hasChanged()?f.clone(this.changed):!1;var a,b=!1,d=this._previousAttributes,e;for(e in c)if(!f.isEqual(d[e],a=c[e]))(b||(b={}))[e]=a;return b},previous:function(c){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[c]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(c,a){if(a.silent||!this.validate)return!0;var c=f.extend({},this.attributes,c),b=this.validate(c,a);if(!b)return!0;a&&a.error?a.error(this,b,a):this.trigger("error",this,b,a);return!1}});var q=d.Collection=function(c,a){a||(a={});a.model&&(this.model=a.model);a.comparator&&(this.comparator=a.comparator);
this._reset();this.initialize.apply(this,arguments);c&&this.reset(c,{silent:!0,parse:a.parse})};f.extend(q.prototype,k,{model:i,initialize:function(){},toJSON:function(c){return this.map(function(a){return a.toJSON(c)})},add:function(c,a){var d,e,h,g,n,i={},p={},k=[];a||(a={});c=f.isArray(c)?c.slice():[c];d=0;for(e=c.length;d<e;d++){if(!(h=c[d]=this._prepareModel(c[d],a)))throw Error("Can't add an invalid model to a collection");g=h.cid;n=h.id;i[g]||this._byCid[g]||null!=n&&(p[n]||this._byId[n])?
k.push(d):i[g]=p[n]=h}for(d=k.length;d--;)c.splice(k[d],1);d=0;for(e=c.length;d<e;d++)(h=c[d]).on("all",this._onModelEvent,this),this._byCid[h.cid]=h,null!=h.id&&(this._byId[h.id]=h);this.length+=e;b.apply(this.models,[null!=a.at?a.at:this.models.length,0].concat(c));this.comparator&&this.sort({silent:!0});if(a.silent)return this;d=0;for(e=this.models.length;d<e;d++)if(i[(h=this.models[d]).cid])a.index=d,h.trigger("add",h,this,a);return this},remove:function(c,a){var b,d,e,h;a||(a={});c=f.isArray(c)?
c.slice():[c];b=0;for(d=c.length;b<d;b++)if(h=this.getByCid(c[b])||this.get(c[b]))delete this._byId[h.id],delete this._byCid[h.cid],e=this.indexOf(h),this.models.splice(e,1),this.length--,a.silent||(a.index=e,h.trigger("remove",h,this,a)),this._removeReference(h);return this},push:function(c,a){c=this._prepareModel(c,a);this.add(c,a);return c},pop:function(c){var a=this.at(this.length-1);this.remove(a,c);return a},unshift:function(c,a){c=this._prepareModel(c,a);this.add(c,f.extend({at:0},a));return c},
shift:function(c){var a=this.at(0);this.remove(a,c);return a},get:function(c){return null==c?void 0:this._byId[null!=c.id?c.id:c]},getByCid:function(c){return c&&this._byCid[c.cid||c]},at:function(c){return this.models[c]},where:function(c){return f.isEmpty(c)?[]:this.filter(function(a){for(var b in c)if(c[b]!==a.get(b))return!1;return!0})},sort:function(c){c||(c={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var a=f.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(a):this.models.sort(a);c.silent||this.trigger("reset",this,c);return this},pluck:function(c){return f.map(this.models,function(a){return a.get(c)})},reset:function(c,a){c||(c=[]);a||(a={});for(var b=0,d=this.models.length;b<d;b++)this._removeReference(this.models[b]);this._reset();this.add(c,f.extend({silent:!0},a));a.silent||this.trigger("reset",this,a);return this},fetch:function(c){c=c?f.clone(c):{};void 0===c.parse&&(c.parse=!0);var a=this,b=c.success;c.success=function(d,
e,f){a[c.add?"add":"reset"](a.parse(d,f),c);b&&b(a,d)};c.error=d.wrapError(c.error,a,c);return(this.sync||d.sync).call(this,"read",this,c)},create:function(c,a){var b=this,a=a?f.clone(a):{},c=this._prepareModel(c,a);if(!c)return!1;a.wait||b.add(c,a);var d=a.success;a.success=function(e,f){a.wait&&b.add(e,a);d?d(e,f):e.trigger("sync",c,f,a)};c.save(null,a);return c},parse:function(c){return c},chain:function(){return f(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(c,a){a||(a={});c instanceof i?c.collection||(c.collection=this):(a.collection=this,c=new this.model(c,a),c._validate(c.attributes,a)||(c=!1));return c},_removeReference:function(c){this==c.collection&&delete c.collection;c.off("all",this._onModelEvent,this)},_onModelEvent:function(c,a,b,d){("add"==c||"remove"==c)&&b!=this||("destroy"==c&&this.remove(a,d),a&&c==="change:"+a.idAttribute&&(delete this._byId[a.previous(a.idAttribute)],this._byId[a.id]=a),this.trigger.apply(this,
arguments))}});f.each("forEach each map reduce reduceRight find detect filter select reject every all some any include contains invoke max min sortBy sortedIndex toArray size first initial rest last without indexOf shuffle lastIndexOf isEmpty groupBy".split(" "),function(c){q.prototype[c]=function(){return f[c].apply(f,[this.models].concat(f.toArray(arguments)))}});var w=d.Router=function(c){c||(c={});c.routes&&(this.routes=c.routes);this._bindRoutes();this.initialize.apply(this,arguments)},x=/:\w+/g,
n=/\*\w+/g,v=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(w.prototype,k,{initialize:function(){},route:function(c,a,b){d.history||(d.history=new s);f.isRegExp(c)||(c=this._routeToRegExp(c));b||(b=this[a]);d.history.route(c,f.bind(function(e){e=this._extractParameters(c,e);b&&b.apply(this,e);this.trigger.apply(this,["route:"+a].concat(e));d.history.trigger("route",this,a,e)},this));return this},navigate:function(c,a){d.history.navigate(c,a)},_bindRoutes:function(){if(this.routes){var c=[],a;for(a in this.routes)c.unshift([a,
this.routes[a]]);a=0;for(var b=c.length;a<b;a++)this.route(c[a][0],c[a][1],this[c[a][1]])}},_routeToRegExp:function(c){c=c.replace(v,"\\$&").replace(x,"([^/]+)").replace(n,"(.*?)");return RegExp("^"+c+"$")},_extractParameters:function(c,a){return c.exec(a).slice(1)}});var s=d.History=function(){this.handlers=[];f.bindAll(this,"checkUrl")},y=/^[#\/]/,t=/msie [\w.]+/;s.started=!1;f.extend(s.prototype,k,{interval:50,getHash:function(c){return(c=(c?c.location:window.location).href.match(/#(.*)$/))?c[1]:
""},getFragment:function(c,a){if(null==c)if(this._hasPushState||a){var c=window.location.pathname,b=window.location.search;b&&(c+=b)}else c=this.getHash();c.indexOf(this.options.root)||(c=c.substr(this.options.root.length));return c.replace(y,"")},start:function(c){if(s.started)throw Error("Backbone.history has already been started");s.started=!0;this.options=f.extend({},{root:"/"},this.options,c);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);var c=this.getFragment(),a=document.documentMode;if(a=t.exec(navigator.userAgent.toLowerCase())&&(!a||7>=a))this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c);this._hasPushState?h(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?h(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=c;c=window.location;a=c.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&a&&c.hash&&(this.fragment=this.getHash().replace(y,""),window.history.replaceState({},document.title,c.protocol+"//"+c.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);s.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!s.started)return!1;if(!b||!0===b)b={trigger:b};var d=(a||"").replace(y,"");this.fragment!=d&&(this._hasPushState?(0!=d.indexOf(this.options.root)&&(d=this.options.root+d),this.fragment=d,window.history[b.replace?"replaceState":"pushState"]({},document.title,d)):this._wantsHashChange?(this.fragment=d,this._updateHash(window.location,d,b.replace),this.iframe&&d!=this.getFragment(this.getHash(this.iframe))&&(b.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,d,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,d){d?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var C=d.View=function(a){this.cid=f.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},E=/^(\S+)\s*(.*)$/,A="model collection el id attributes className tagName".split(" ");
f.extend(C.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,d){a=document.createElement(a);b&&h(a).attr(b);d&&h(a).html(d);return a},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof h?a:h(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=z(this,"events"))){this.undelegateEvents();
for(var b in a){var d=a[b];f.isFunction(d)||(d=this[a[b]]);if(!d)throw Error('Method "'+a[b]+'" does not exist');var e=b.match(E),h=e[1],e=e[2],d=f.bind(d,this),h=h+(".delegateEvents"+this.cid);""===e?this.$el.bind(h,d):this.$el.delegate(e,h,d)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,d=A.length;b<d;b++){var e=A[b];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=z(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});i.extend=q.extend=w.extend=C.extend=function(a,b){var d=this,e;e=a&&a.hasOwnProperty("constructor")?a.constructor:function(){d.apply(this,arguments)};f.extend(e,d);u.prototype=d.prototype;e.prototype=new u;a&&f.extend(e.prototype,a);b&&f.extend(e,b);e.prototype.constructor=e;e.__super__=d.prototype;e.extend=this.extend;return e};var e={create:"POST",
update:"PUT","delete":"DELETE",read:"GET"};d.sync=function(a,b,g){var n=e[a];g||(g={});var i={type:n,dataType:"json"};g.url||(i.url=z(b,"url")||B());if(!g.data&&b&&("create"==a||"update"==a))i.contentType="application/json",i.data=JSON.stringify(b.toJSON());d.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(d.emulateHTTP&&("PUT"===n||"DELETE"===n))d.emulateJSON&&(i.data._method=n),i.type="POST",i.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
n)};"GET"!==i.type&&!d.emulateJSON&&(i.processData=!1);return h.ajax(f.extend(i,g))};d.wrapError=function(a,b,d){return function(e,f){f=e===b?f:e;a?a(b,f,d):b.trigger("error",b,f,d)}};var u=function(){},z=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},B=function(){throw Error('A "url" property or function must be specified');}}).call(this);(function(){window.StackMob=this.StackMob={DEFAULT_API_VERSION:0,DEFAULT_LOGIN_SCHEMA:"user",DEFAULT_LOGIN_FIELD:"username",DEFAULT_PASSWORD_FIELD:"password",EARTH_RADIANS_MI:3956.6,EARTH_RADIANS_KM:6367.5,FORCE_CREATE_REQUEST:"stackmob_force_create_request",ARRAY_FIELDNAME:"stackmob_array_fieldname",ARRAY_VALUES:"stackmob_array_values",CASCADE_DELETE:"stackmob_cascade_delete",HARD_DELETE:!0,SOFT_DELETE:!1,API_SERVER:"api.stackmob.com",RETRY_WAIT:1E4,RETRY_ATTEMPTS:3,REFRESH_TOKEN_KEY:"oauth2.refreshToken",
POST:"POST",PUT:"PUT",DELETE:"DELETE",CONTENT_TYPE_JSON:"application/json",apiVersion:0,sdkVersion:"0.6.0",publicKey:null,Storage:{STORAGE_PREFIX:"stackmob.",persist:function(g,l){localStorage&&localStorage.setItem(this.STORAGE_PREFIX+g,l)},retrieve:function(g){return localStorage?localStorage.getItem(this.STORAGE_PREFIX+g):null},remove:function(g){localStorage&&localStorage.removeItem(this.STORAGE_PREFIX+g)}},getLoggedInUser:function(){var g=!this.isOAuth2Mode()&&this.Storage.retrieve(this.loggedInUserKey)||
this.Storage.retrieve("oauth2.user");return this.isLoggedIn()&&g?g:null},isLoggedIn:function(){return!this.isLoggedOut()||this.hasValidOAuth()},isUserLoggedIn:function(g){return g==this.getLoggedInUser()},isLoggedOut:function(){return!this.hasValidOAuth()},getScheme:function(){return!0===this.secure?"https":"http"},getDevAPIBase:function(){return"undefined"!==typeof PhoneGap?this.getScheme()+"://"+StackMob.API_SERVER+"/":!0===this.fullURL?this.getScheme()+"://dev."+this.appName+"."+this.clientSubdomain+
".stackmobapp.com/":"/"},getProdAPIBase:function(){return"undefined"!==typeof PhoneGap?this.getScheme()+"://"+StackMob.API_SERVER+"/":!0===this.fullURL?this.getScheme()+"://"+this.appName+"."+this.clientSubdomain+".stackmobapp.com/":"/"},getBaseURL:function(){return StackMob.apiURL||(StackMob.fullURL?0===StackMob.apiVersion?StackMob.getDevAPIBase():StackMob.getProdAPIBase():window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/")},throwError:function(g){throw Error(g);
},urlError:function(){this.throwError('A "url" property or function must be specified')},requirePublicKey:function(){StackMob.publicKey||this.throwError("Error: This requires that you initialize StackMob with a public key.")},isOAuth2Mode:function(){return!isNaN(StackMob.publicKey&&!StackMob.privateKey)},prepareCredsForSaving:function(g,l,a,b,d){b=(new Date).getTime()+1E3*b;g={"oauth2.accessToken":g,"oauth2.macKey":a,"oauth2.expires":b,"oauth2.user":d};g[StackMob.REFRESH_TOKEN_KEY]=l;return g},saveOAuthCredentials:function(g){var l=
g["oauth2.accessToken"],a=g[StackMob.REFRESH_TOKEN_KEY];this.Storage.retrieve("oauth2.accessToken")!=l&&this.Storage.persist("oauth2.expires",g["oauth2.expires"]);this.Storage.persist("oauth2.accessToken",l);this.Storage.persist(StackMob.REFRESH_TOKEN_KEY,a);this.Storage.persist("oauth2.macKey",g["oauth2.macKey"]);this.Storage.persist("oauth2.user",g["oauth2.user"])},hasValidOAuth:function(){if(!this.isOAuth2Mode())return!1;var g=this.getOAuthCredentials(),l=g["oauth2.expires"]||0;return _.all([g["oauth2.accessToken"],
g["oauth2.macKey"],l],_.identity)&&(new Date).getTime()<=l},shouldSendRefreshToken:function(){return this.hasExpiredOAuth()&&this.hasRefreshToken()&&this.shouldKeepLoggedIn()},keepLoggedIn:function(g){StackMob.Storage.persist("oauth2.shouldKeepLoggedIn",!0===g)},shouldKeepLoggedIn:function(){return"true"===StackMob.Storage.retrieve("oauth2.shouldKeepLoggedIn")},hasRefreshToken:function(){var g=this.getOAuthCredentials();return g&&"undefined"!==typeof g[StackMob.REFRESH_TOKEN_KEY]&&null!=g[StackMob.REFRESH_TOKEN_KEY]},
getRefreshToken:function(){return this.getOAuthCredentials()[StackMob.REFRESH_TOKEN_KEY]},hasExpiredOAuth:function(){return this.isOAuth2Mode()&&null==this.getOAuthExpireTime()||this.getOAuthExpireTime()<=(new Date).getTime()},getOAuthCredentials:function(){var g=StackMob.Storage.retrieve("oauth2.accessToken"),l=StackMob.Storage.retrieve("oauth2.macKey"),a=StackMob.Storage.retrieve("oauth2.expires"),b=StackMob.Storage.retrieve(StackMob.REFRESH_TOKEN_KEY),g={"oauth2.accessToken":g,"oauth2.macKey":l,
"oauth2.expires":a};g[StackMob.REFRESH_TOKEN_KEY]=b;return g},getOAuthExpireTime:function(){var g=this.Storage.retrieve("oauth2.expires");return g?parseInt(g):null},METHOD_MAP:{create:"POST",read:"GET",update:"PUT","delete":"DELETE",post:"POST",get:"GET",put:"PUT",addRelationship:"POST",appendAndSave:"PUT",deleteAndSave:"DELETE",login:"GET",accessToken:"POST",refreshToken:"POST",logout:"GET",forgotPassword:"POST",loginWithTempAndSetNewPassword:"GET",resetPassword:"POST",facebookAccessToken:"POST",
createUserWithFacebook:"GET",linkUserWithFacebook:"GET",cc:"GET"},getProperty:function(g,l){return!g||!g[l]?null:_.isFunction(g[l])?g[l]():g[l]},init:function(g){g=g||{};this.initStart(g);this.userSchema=g.userSchema||this.DEFAULT_LOGIN_SCHEMA;this.loginField=g.loginField||this.DEFAULT_LOGIN_FIELD;this.passwordField=g.passwordField||this.DEFAULT_PASSWORD_FIELD;this.newPasswordField=g.newPasswordField||"new_password";this.apiVersion=g.apiVersion||this.DEFAULT_API_VERSION;this.appName=this.getProperty(g,
"appName")||this.throwError("An appName must be specified");this.clientSubdomain=this.getProperty(g,"clientSubdomain");this.publicKey=g.publicKey;this.apiURL=g.apiURL;this.oauth2targetdomain=g.oauth2targetdomain||this.oauth2targetdomain||"www.stackmob.com";this.secure=!0===g.secure;this.fullURL=!0===g.fullURL||"undefined"!==typeof PhoneGap||this.fullURL;this.ajax=g.ajax||this.ajax;this.debug=0===this.apiVersion;this.urlRoot=g.urlRoot||this.getBaseURL();this.initEnd(g);return this},initStart:function(){},
initEnd:function(){}}}).call(this);
(function(){function g(a,b){var d=StackMob.getBaseURL(),f=b.url.replace(RegExp(d,"g"),"/"),h=d.replace(RegExp("^http://|^https://","g"),"").replace(/\//,""),d=StackMob.Storage.retrieve("oauth2.accessToken"),g=StackMob.Storage.retrieve("oauth2.macKey");StackMob.Storage.retrieve("oauth2.expires");if(StackMob.isOAuth2Mode()&&d&&g){var k=StackMob.METHOD_MAP[a]||"GET",i=h.split(":"),h=1<i.length?i[0]:h,q=1<i.length?i[1]:80,i=Math.round((new Date).getTime()/1E3),l="n"+Math.round(1E4*Math.random()),f=CryptoJS.HmacSHA1(i+
"\n"+l+"\n"+k+"\n"+f+"\n"+h+"\n"+q+"\n\n",g).toString(CryptoJS.enc.Base64);return'MAC id="'+d+'",ts="'+i+'",nonce="'+l+'",mac="'+f+'"'}}var l=this;_.extend(StackMob,{isSencha:function(){return l.Ext},isZepto:function(){return l.Zepto},initEnd:function(){StackMob.Model=Backbone.Model.extend({urlRoot:StackMob.urlRoot,url:function(){var a=StackMob.urlRoot||StackMob.urlError();return a+=this.schemaName},getPrimaryKeyField:function(){return this.schemaName+"_id"},constructor:function(){this.setIDAttribute();
Backbone.Model.prototype.constructor.apply(this,arguments)},initialize:function(){StackMob.getProperty(this,"schemaName")||StackMob.throwError("A schemaName must be defined");this.setIDAttribute()},setIDAttribute:function(){this.idAttribute=this.getPrimaryKeyField()},parse:function(a){return!a||a&&(!a.text||""==a.text)?a:JSON.parse(a.text)},sync:function(a,b,d){StackMob.sync.call(this,a,this,d)},create:function(a){var b={};b[StackMob.FORCE_CREATE_REQUEST]=!0;_.extend(b,a);this.save(null,b)},query:function(a,
b){b=b||{};_.extend(b,{query:a});this.fetch(b)},save:function(a,b){var d=a?a.success:{},f=a?a.error:{};"undefined"===typeof b&&(_.isFunction(d)||_.isFunction(f))?Backbone.Model.prototype.save.call(this,null,a):Backbone.Model.prototype.save.call(this,a,b)},fetchExpanded:function(a,b){(0>a||3<a)&&StackMob.throwError("Depth must be between 0 and 3 inclusive.");var d={};_.extend(d,b);d.data=d.data||{};d.data._expand=a;this.fetch(d)},getAsModel:function(a,b){var d=this.get(a);return d?_.isArray(d)?_.map(d,
function(a){return new b(a)}):new b(d):{}},appendAndCreate:function(a,b,d){this.addRelationship(a,b,d)},addRelationship:function(a,b,d){d=d||{};d[StackMob.ARRAY_FIELDNAME]=a;d[StackMob.ARRAY_VALUES]=b;StackMob.sync.call(this,"addRelationship",this,d)},appendAndSave:function(a,b,d){d=d||{};d[StackMob.ARRAY_FIELDNAME]=a;d[StackMob.ARRAY_VALUES]=b;StackMob.sync.call(this,"appendAndSave",this,d)},deleteAndSave:function(a,b,d,f){f=f||{};f[StackMob.ARRAY_FIELDNAME]=a;f[StackMob.ARRAY_VALUES]=b;f[StackMob.CASCADE_DELETE]=
d;var h=this;f.stackmob_ondeleteAndSave=function(){var d=h.get(a);h.set(a,_.difference(d,b))};StackMob.sync.call(this,"deleteAndSave",this,f)},setBinaryFile:function(a,b,d,f){this.set(a,"Content-Type: "+d+"\nContent-Disposition: attachment; filename="+b+"\nContent-Transfer-Encoding: base64\n\n"+f)},incrementOnSave:function(a,b){this.attributes[this.idAttribute]?(this.attributes[a]&&delete this.attributes[a],this.set(a+"[inc]",b)):StackMob.throwError("Please specify an id for the row you wish to update. When creating a new instance of your object, you need to pass in JSON that includes the id field and value (e.g. var user = new StackMob.User({ username: 'chucknorris' });)  Or, for custom objects: var todoInstance = new Todo({todo_id : '1234'})")},
decrementOnSave:function(a,b){this.incrementOnSave(a,-1*b)}});StackMob.Collection=Backbone.Collection.extend({initialize:function(){this.model||StackMob.throwError("Please specify a StackMob.Model for this collection. e.g., var Items = StackMob.Collection.extend({ model: Item });");this.schemaName=(new this.model).schemaName},url:function(){var a=StackMob.urlRoot||StackMob.urlError();return a+=this.schemaName},parse:function(a){return!a||a&&(!a.text||""==a.text)?a:JSON.parse(a.text)},sync:function(a,
b,d){StackMob.sync.call(this,a,this,d)},query:function(a,b){b=b||{};_.extend(b,{query:a});this.fetch(b)},create:function(a,b){var d={};d[StackMob.FORCE_CREATE_REQUEST]=!0;_.extend(d,b);Backbone.Collection.prototype.create.call(this,a,d)},count:function(a,b){a=a||new StackMob.Collection.Query;b=b||{};b.stackmob_count=!0;var d=b.success;b.success=function(a){if(a&&a.getAllResponseHeaders){var b=a.getResponseHeader("Content-Range"),g=0;b&&(g=b.substring(b.indexOf("/")+1,b.length));if(0===g)try{g=JSON.parse(a.responseText).length}catch(k){}d&&
d(g)}else d(a)};a.setRange&&(b.query=a.setRange(0,0));return(this.sync||Backbone.sync).call(this,"query",this,b)}});StackMob.User=StackMob.Model.extend({idAttribute:StackMob.loginField,schemaName:StackMob.userSchema,getPrimaryKeyField:function(){return StackMob.loginField},isLoggedIn:function(){return StackMob.isUserLoggedIn(this.get(StackMob.loginField))},login:function(a,b){b=b||{};StackMob.keepLoggedIn("undefined"===typeof a?!1:a);b.data=b.data||{};b.data[StackMob.loginField]=this.get(StackMob.loginField);
b.data[StackMob.passwordField]=this.get(StackMob.passwordField);StackMob.isOAuth2Mode()&&(b.data.token_type="mac");b.stackmob_onaccessToken=StackMob.processLogin;(this.sync||Backbone.sync).call(this,StackMob.isOAuth2Mode()?"accessToken":"login",this,b)},logout:function(a){a=a||{};a.data=a.data||{};a.stackmob_onlogout=function(){StackMob.Storage.remove(StackMob.loggedInUserKey);StackMob.Storage.remove("oauth2.accessToken");StackMob.Storage.remove(StackMob.REFRESH_TOKEN_KEY);StackMob.Storage.remove("oauth2.macKey");
StackMob.Storage.remove("oauth2.expires");StackMob.Storage.remove("oauth2.user")};(this.sync||Backbone.sync).call(this,"logout",this,a)},loginWithFacebookToken:function(a,b,d){d=d||{};d.data=d.data||{};_.extend(d.data,{fb_at:a,token_type:"mac"});d.stackmob_onfacebookAccessToken=StackMob.processLogin;(this.sync||Backbone.sync).call(this,"facebookAccessToken",this,d)},createUserWithFacebook:function(a,b){b=b||{};b.data=b.data||{};_.extend(b.data,{fb_at:a,token_type:"mac"});b.data[StackMob.loginField]=
b[StackMob.loginField]||this.get(StackMob.loginField);(this.sync||Backbone.sync).call(this,"createUserWithFacebook",this,b)},linkUserWithFacebook:function(a,b){b=b||{};b.data=b.data||{};_.extend(b.data,{fb_at:a,token_type:"mac"});(this.sync||Backbone.sync).call(this,"linkUserWithFacebook",this,b)},loginWithTempAndSetNewPassword:function(a,b,d,f){f=f||{};f.data=f.data||{};var h={};h[StackMob.passwordField]=a;this.set(h);f.data[StackMob.newPasswordField]=b;this.login(d,f)},forgotPassword:function(a){a=
a||{};a.data=a.data||{};a.data[StackMob.loginField]=this.get(StackMob.loginField);(this.sync||Backbone.sync).call(this,"forgotPassword",this,a)},resetPassword:function(a,b,d){d=d||{};d.data=d.data||{};d.data.old={password:a};d.data["new"]={password:b};(this.sync||Backbone.sync).call(this,"resetPassword",this,d)}});StackMob.Users=StackMob.Collection.extend({model:StackMob.User});StackMob.GeoPoint=function(a,b){_.isNumber(a)?((-90>a||90<a)&&StackMob.throwError("Latitude value must be between -90 and 90 inclusive."),
(-180>b||180<b)&&StackMob.throwError("Longitude value must be between -180 and 180 inclusive."),this.lat=a,this.lon=b):((-90>a.lat||90<a.lat)&&StackMob.throwError("Latitude value must be between -90 and 90 inclusive."),(-180>a.lon||180<a.lon)&&StackMob.throwError("Longitude value must be between -180 and 180 inclusive."),this.lat=a.lat,this.lon=a.lon)};StackMob.GeoPoint.prototype.toJSON=function(){return{lat:this.lat,lon:this.lon}};StackMob.Model.Query=function(){this.selectFields=[];this.params=
{}};_.extend(StackMob.Model.Query.prototype,{select:function(a){this.selectFields.push(a);return this},setExpand:function(a){this.params._expand=a;return this}});StackMob.Collection.Query=function(){this.params={};this.selectFields=[];this.orderBy=[];this.range=null};StackMob.Collection.Query.prototype=new StackMob.Model.Query;StackMob.Collection.Query.prototype.constructor=StackMob.Collection.Query;_.extend(StackMob.Collection.Query.prototype,{addParam:function(a,b){this.params[a]=b;return this},
equals:function(a,b){this.params[a]=b;return this},lt:function(a,b){this.params[a+"[lt]"]=b;return this},lte:function(a,b){this.params[a+"[lte]"]=b;return this},gt:function(a,b){this.params[a+"[gt]"]=b;return this},gte:function(a,b){this.params[a+"[gte]"]=b;return this},notEquals:function(a,b){this.params[a+"[ne]"]=b;return this},isNull:function(a){this.params[a+"[null]"]=!0;return this},isNotNull:function(a){this.params[a+"[null]"]=!1;return this},mustBeOneOf:function(a,b){var d="";if(_.isArray(b))for(var f=
b.length,h=0;h<f;h++)d+=b[h],h+1<f&&(d+=",");else d=b;this.params[a+"[in]"]=d;return this},orderAsc:function(a){this.orderBy.push(a+":asc");return this},orderDesc:function(a){this.orderBy.push(a+":desc");return this},setRange:function(a,b){this.range={start:a,end:b};return this},mustBeNear:function(a,b,d){this.params[a+"[near]"]=b.lat+","+b.lon+","+d;return this},mustBeNearMi:function(a,b,d){this.mustBeNear(a,b,d/StackMob.EARTH_RADIANS_MI);return this},mustBeNearKm:function(a,b,d){this.mustBeNear(a,
b,d/StackMob.EARTH_RADIANS_KM);return this},isWithin:function(a,b,d){this.params[a+"[within]"]=b.lat+","+b.lon+","+d;return this},isWithinMi:function(a,b,d){this.isWithin(a,b,d/StackMob.EARTH_RADIANS_MI);return this},isWithinKm:function(a,b,d){this.isWithin(a,b,d/StackMob.EARTH_RADIANS_KM);return this},isWithinBox:function(a,b,d){this.params[a+"[within]"]=b.lat+","+b.lon+","+d.lat+","+d.lon;return this}})},cc:function(a,b,d,f){this.customcode(a,b,d,f)},customcode:function(a,b,d,f){_.isObject(d)?(f=
d||{},d=(d=f.httpVerb)&&!_.isUndefined(StackMob.METHOD_MAP[d.toLowerCase()])?d:"GET",f.httpVerb=d):(f=f||{},_.isString(d)&&(d&&!_.isUndefined(StackMob.METHOD_MAP[d.toLowerCase()]))&&(f.httpVerb=d.toUpperCase()));f.data=f.data||{};"GET"!==d&&(f.contentType=f.contentType||StackMob.CONTENT_TYPE_JSON);_.extend(f.data,b);f.url=this.debug?this.getDevAPIBase():this.getProdAPIBase();this.sync.call(StackMob,a,null,f)},processLogin:function(a){if(StackMob.isOAuth2Mode()){var b=a.access_token,d=a.refresh_token,
f=a.mac_key,h=a.expires_in,g=null;try{var g=a.stackmob[StackMob.userSchema][StackMob.loginField],k=StackMob.prepareCredsForSaving(b,d,f,h,g);StackMob.saveOAuthCredentials(k);StackMob.Storage.persist(StackMob.loggedInUserKey,g)}catch(i){console&&console.error("Problem saving OAuth 2.0 credentials and user")}}},getCallId:function(a,b){var d={method:a,model:b||{},time:(new Date).getTime()};return JSON.stringify(d)},sync:function(a,b,d){d=d||{};if(!StackMob.isAccessTokenMethod(a)&&StackMob.shouldSendRefreshToken()&&
!0!==d.stackmob_attempted_refresh){var f=a,h=d;h.stackmob_attempted_refresh=!0;var p=this;StackMob.refreshSession.call(StackMob,{oncomplete:function(){StackMob.sync.call(p,f,b,h)}});return!1}var k=!0===d[StackMob.FORCE_CREATE_REQUEST];k&&(a="create");var i=_.extend({type:d.httpVerb||StackMob.METHOD_MAP[a]||"GET",dataType:"json"},d);i.data=i.data||{};!i.url&&b&&(i.url=StackMob.getProperty(b,"url"));var q="cc"!=a,l=b&&b.isNew&&!b.isNew(),k=!k,x="addRelationship"==a||"appendAndSave"==a||"deleteAndSave"==
a;if(_.include("create update delete read query deleteAndSave appendAndSave addRelationship".split(" "),a)){if(x||q&&l&&k)i.url+=("/"==i.url.charAt(i.url.length-1)?"":"/")+encodeURIComponent(b.get(b.getPrimaryKeyField())),x&&(i.url+="/"+d[StackMob.ARRAY_FIELDNAME]),"deleteAndSave"==a&&(q="",q=_.isArray(d[StackMob.ARRAY_VALUES])?_.map(d[StackMob.ARRAY_VALUES],function(a){return encodeURIComponent(a)}).join(","):encodeURIComponent(d[StackMob.ARRAY_VALUES]),i.url+="/"+q)}else i.url+=("/"==i.url.charAt(i.url.length-
1)?"":"/")+a;q=d;i.headers=i.headers||{};i.headers=_.extend({Accept:"application/vnd.stackmob+json; version="+StackMob.apiVersion},i.headers);_.extend(i.headers,{"X-StackMob-User-Agent":"StackMob (JS; "+StackMob.sdkVersion+")"});StackMob.publicKey&&!StackMob.privateKey?(i.headers["X-StackMob-API-Key"]=StackMob.publicKey,i.headers["X-StackMob-Proxy-Plain"]="stackmob-api"):i.headers["X-StackMob-Proxy"]="stackmob-api";StackMob.isOAuth2Mode()&&StackMob.isAccessTokenMethod(a)?i.contentType="application/x-www-form-urlencoded":
_.include(["PUT","POST"],StackMob.METHOD_MAP[a])&&(i.contentType=i.contentType||StackMob.CONTENT_TYPE_JSON);isNaN(q[StackMob.CASCADE_DELETE])||(i.headers["X-StackMob-CascadeDelete"]=!0==q[StackMob.CASCADE_DELETE]);if(q.query&&(q=i.query||throwError("No StackMobQuery object provided to the query call."),q.selectFields&&0<q.selectFields.length&&(i.headers["X-StackMob-Select"]=q.selectFields.join()),q.range&&(i.headers.Range="objects="+q.range.start+"-"+q.range.end),_.extend(i.data,q.params),q.orderBy&&
0<q.orderBy.length)){q=q.orderBy;l="";k=q.length;for(x=0;x<k;x++)l+=q[x],x+1<k&&(l+=",");i.headers["X-StackMob-OrderBy"]=l}q=a;l=function(a){return _.map(_.keys(a),function(b){return b+"="+encodeURIComponent(a[b])}).join("&")};d=d||{};if(StackMob.isOAuth2Mode()&&StackMob.isAccessTokenMethod(q))i.data=l(i.data);else if("POST"==i.type||"PUT"==i.type)if("resetPassword"==q||"forgotPassword"==q)i.data=JSON.stringify(i.data);else if("addRelationship"==q||"appendAndSave"==q)d&&d[StackMob.ARRAY_VALUES]&&
(i.data=JSON.stringify(d[StackMob.ARRAY_VALUES]));else if(b){var n=b.toJSON();_.each(d.remote_ignore||[],function(a){delete n[a]});var v=function(a){if(a instanceof Array){if(_.reduce(a,function(a,b){return a||v(b)},!1))return!0}else return"object"==typeof a?"lat"in a&&"lon"in a?!1:!0:!1};if("true"==d.ignore_objects)for(var s in n)v(n[s])&&(console.warn("Found object in array field "+s+". Ignoring field."),delete n[s]);delete n.lastmoddate;delete n.createddate;"update"==q&&delete n[StackMob.passwordField];
StackMob.isOAuth2Mode()&&delete n.sm_owner;i.data=JSON.stringify(_.extend(n,i.data))}else i.data=JSON.stringify(i.data);else"GET"==i.type&&!_.isEmpty(i.data)&&(i.url+="?",s=l(i.data),i.url+=s),delete i.data;s=i||{};s.processData=!1;s.accepts=s.headers.Accept;StackMob.isAccessTokenMethod(a)||(s=a,StackMob.isAccessTokenMethod(s)||(s=g(s,i))&&(i.headers.Authorization=s));StackMob.makeAPICall(b,i,a)},refreshSession:function(a){var b={};_.extend(b,a);if(StackMob.hasRefreshToken()){b.url="/"+StackMob.userSchema;
b.contentType="application/x-www-form-urlencoded";b.data={refresh_token:StackMob.getOAuthCredentials()[StackMob.REFRESH_TOKEN_KEY],grant_type:"refresh_token",token_type:"mac",mac_algorithm:"hmac-sha1"};var d=a.oncomplete;b.oncomplete=function(){d()};b.stackmob_onrefreshToken=StackMob.processLogin;b.error=function(){StackMob.Storage.remove(StackMob.REFRESH_TOKEN_KEY)};(this.sync||Backbone.sync).call(this,"refreshToken",this,b)}},makeAPICall:function(a,b,d){return StackMob.ajax?StackMob.ajax(a,b,d):
StackMob.isSencha()?StackMob.ajaxOptions.sencha(a,b,d):StackMob.isZepto()?StackMob.ajaxOptions.zepto(a,b,d):StackMob.ajaxOptions.jquery(a,b,d)},onsuccess:function(a,b,d,f,h){if(d){if(_.isFunction(d["stackmob_on"+b]))d["stackmob_on"+b](f);if(_.isFunction(d.oncomplete))d.oncomplete(f)}h&&(f?(StackMob.isOAuth2Mode()&&(StackMob.isAccessTokenMethod(b)&&f.stackmob)&&(f=f.stackmob.user),h(f)):h())},onerror:function(a,b,d,f,h,p){var k=a.status,i;try{i=JSON.parse(b)}catch(l){i={error:"Invalid JSON returned."}}if(503==
k){a=a.getResponseHeader("retry-after");try{a=1E3*parseInt(responseHeaderValue)}catch(w){a=StackMob.RETRY_WAIT}if("number"===typeof h.stackmob_retry){if(h.stackmob_retry-=1,0>=h.stackmob_retry)return}else h.stackmob_retry=StackMob.RETRY_ATTEMPTS;_.delay(function(){var a=g(f,h);h.headers.Authorization=a;d(h)},a)}else{if(_.isFunction(h.oncomplete))h.oncomplete(i);p&&p(f,i)}},isAccessTokenMethod:function(a){return _.include(["accessToken","facebookAccessToken","refreshToken"],a)}})}).call(this);
(function(){var g=this.jQuery||this.Ext||this.Zepto;_.extend(StackMob,{ajaxOptions:{sencha:function(l,a,b){var d={},f=a.success;a.success=function(d){var h=d&&d.responseText?JSON.parse(d.responseText):null;!0===a.stackmob_count&&(h=d);StackMob.onsuccess(l,b,a,h,f)};var h=a.error;d.url=a.url;d.headers=a.headers;d.params=a.data;d.success=a.success;d.disableCaching=!1;d.method=a.type;a.error=function(a){StackMob.onerror(a,a.responseText||a.text,g.Ajax.request,l,d,h)};d.failure=a.error;return g.Ajax.request(d)},
zepto:function(l,a,b){var d=a.success,f=function(f,h){h=f?JSON.parse(f):null;StackMob.onsuccess(l,b,a,h,d)};a.success=f;var h=a.error,p=function(b){console.log("default error");StackMob.onerror(b,b.responseText||b.text,g.ajax,l,a,h)};a.error=p;var k={};k.url=a.url;k.headers=a.headers;k.contentType=a.headers.contentType;k.type=a.type;k.data=a.data;k.success=f;k.error=p;return g.ajax(k)},jquery:function(l,a,b){a.beforeSend=function(a,b){a.setRequestHeader("Accept",b.accepts);if(!_.isEmpty(b.headers))for(key in b.headers)a.setRequestHeader(key,
b.headers[key])};var d=a.error;a.error=function(b){StackMob.onerror(b,b.responseText||b.text,g.ajax,l,a,d)};var f=a.success;a.success=function(d,g,k){var i;!0===a.stackmob_count?i=k:d&&d.toJSON?i=d:d&&(d.responseText||d.text)?i=JSON.parse(d.responseText||d.text):d&&(i=d);StackMob.onsuccess(d,b,a,i,f)};return g.ajax(a)}}})}).call(this);
var CryptoJS=CryptoJS||function(g,l){var a={},b=a.lib={},d=function(){},f=b.Base={extend:function(a){d.prototype=this;var b=new d;a&&b.mixIn(a);b.$super=this;return b},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.$super.extend(this)}},h=b.WordArray=f.extend({init:function(a,b){a=this.words=a||[];this.sigBytes=
b!=l?b:4*a.length},toString:function(a){return(a||k).stringify(this)},concat:function(a){var b=this.words,d=a.words,f=this.sigBytes,a=a.sigBytes;this.clamp();if(f%4)for(var h=0;h<a;h++)b[f+h>>>2]|=(d[h>>>2]>>>24-8*(h%4)&255)<<24-8*((f+h)%4);else if(65535<d.length)for(h=0;h<a;h+=4)b[f+h>>>2]=d[h>>>2];else b.push.apply(b,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=4294967295<<32-8*(b%4);a.length=g.ceil(b/4)},clone:function(){var a=f.clone.call(this);
a.words=this.words.slice(0);return a},random:function(a){for(var b=[],d=0;d<a;d+=4)b.push(4294967296*g.random()|0);return h.create(b,a)}}),p=a.enc={},k=p.Hex={stringify:function(a){for(var b=a.words,a=a.sigBytes,d=[],f=0;f<a;f++){var h=b[f>>>2]>>>24-8*(f%4)&255;d.push((h>>>4).toString(16));d.push((h&15).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,d=[],f=0;f<b;f+=2)d[f>>>3]|=parseInt(a.substr(f,2),16)<<24-4*(f%8);return h.create(d,b/2)}},i=p.Latin1={stringify:function(a){for(var b=
a.words,a=a.sigBytes,d=[],f=0;f<a;f++)d.push(String.fromCharCode(b[f>>>2]>>>24-8*(f%4)&255));return d.join("")},parse:function(a){for(var b=a.length,d=[],f=0;f<b;f++)d[f>>>2]|=(a.charCodeAt(f)&255)<<24-8*(f%4);return h.create(d,b)}},q=p.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},w=b.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=h.create();
this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=q.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,d=b.words,f=b.sigBytes,i=this.blockSize,k=f/(4*i),k=a?g.ceil(k):g.max((k|0)-this._minBufferSize,0),a=k*i,f=g.min(4*a,f);if(a){for(var p=0;p<a;p+=i)this._doProcessBlock(d,p);p=d.splice(0,a);b.sigBytes-=f}return h.create(p,f)},clone:function(){var a=f.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});b.Hasher=w.extend({init:function(){this.reset()},
reset:function(){w.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);this._doFinalize();return this._hash},clone:function(){var a=w.clone.call(this);a._hash=this._hash.clone();return a},blockSize:16,_createHelper:function(a){return function(b,d){return a.create(d).finalize(b)}},_createHmacHelper:function(a){return function(b,d){return x.HMAC.create(a,d).finalize(b)}}});var x=a.algo={};return a}(Math);
(function(){var g=CryptoJS,l=g.lib,a=l.WordArray,l=l.Hasher,b=[],d=g.algo.SHA1=l.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,d){for(var g=this._hash.words,k=g[0],i=g[1],l=g[2],w=g[3],x=g[4],n=0;80>n;n++){if(16>n)b[n]=a[d+n]|0;else{var v=b[n-3]^b[n-8]^b[n-14]^b[n-16];b[n]=v<<1|v>>>31}v=(k<<5|k>>>27)+x+b[n];v=20>n?v+((i&l|~i&w)+1518500249):40>n?v+((i^l^w)+1859775393):60>n?v+((i&l|i&w|l&w)-1894007588):v+((i^l^w)-
899497514);x=w;w=l;l=i<<30|i>>>2;i=k;k=v}g[0]=g[0]+k|0;g[1]=g[1]+i|0;g[2]=g[2]+l|0;g[3]=g[3]+w|0;g[4]=g[4]+x|0},_doFinalize:function(){var a=this._data,b=a.words,d=8*this._nDataBytes,g=8*a.sigBytes;b[g>>>5]|=128<<24-g%32;b[(g+64>>>9<<4)+15]=d;a.sigBytes=4*b.length;this._process()}});g.SHA1=l._createHelper(d);g.HmacSHA1=l._createHmacHelper(d)})();
(function(){var g=CryptoJS,l=g.enc.Utf8;g.algo.HMAC=g.lib.Base.extend({init:function(a,b){a=this._hasher=a.create();"string"==typeof b&&(b=l.parse(b));var d=a.blockSize,f=4*d;b.sigBytes>f&&(b=a.finalize(b));for(var g=this._oKey=b.clone(),p=this._iKey=b.clone(),k=g.words,i=p.words,q=0;q<d;q++)k[q]^=1549556828,i[q]^=909522486;g.sigBytes=p.sigBytes=f;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=
this._hasher,a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();
(function(){var g=CryptoJS,l=g.lib.WordArray;g.enc.Base64={stringify:function(a){var b=a.words,d=a.sigBytes,f=this._map;a.clamp();for(var a=[],g=0;g<d;g+=3)for(var l=(b[g>>>2]>>>24-8*(g%4)&255)<<16|(b[g+1>>>2]>>>24-8*((g+1)%4)&255)<<8|b[g+2>>>2]>>>24-8*((g+2)%4)&255,k=0;4>k&&g+0.75*k<d;k++)a.push(f.charAt(l>>>6*(3-k)&63));if(b=f.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var a=a.replace(/\s/g,""),b=a.length,d=this._map,f=d.charAt(64);f&&(f=a.indexOf(f),-1!=f&&(b=f));
for(var f=[],g=0,p=0;p<b;p++)if(p%4){var k=d.indexOf(a.charAt(p-1))<<2*(p%4),i=d.indexOf(a.charAt(p))>>>6-2*(p%4);f[g>>>2]|=(k|i)<<24-8*(g%4);g++}return l.create(f,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();
